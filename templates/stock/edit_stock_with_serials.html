{% extends "dashboard/home.html" %}
{% load widget_tweaks %}

{% block table %}
    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        {% endfor %}
    {% endif %}

    <div class="container box-container">
        
        <div class="row gap-2">
            <div class="col">

                <div class="p-2 border border-danger">

                    <form action="" method='POST' class="edit_stock_form">
                            {% csrf_token %}
                        <h3 class="px-2 text-danger">Edit Stock</h3>
                            <div class="p-3">
                                <div class="form-group mt-1">
                                    <label for="" class="form-label">Variant</label>
                                    {{ stock_form.variant|add_class:"form-select" }}
                                </div>
                        
                                <div class="form-group mt-1">
                                    <label for="" class="form-label">Location</label>
                                    {{ stock_form.location|add_class:"form-select" }}
                                </div>
                        
                                <div class="form-group mt-1">
                                    <label for="" class="form-label">Quantity</label>
                                    {{ stock_form.quantity|add_class:"form-control" }}
                                </div>
                            </div>
                        <button class="btn m-3 btn-primary">Submit</button>  
                    </form>
                </div>
             
            </div>

            <div class="col border border-danger right-list-box">
    
                <table class="table table-responsive table-sm w-auto ">
                    <thead>
                        <tr>
                            <th>S.N.</th>
                            <th>Item</th>
                            <th>Variant</th>
                            <th>Serial Number</th>
                            <th>Status</th>
                            <th>Edit</th>
                        </tr>
                    </thead>
                        
                    <tbody>
                        
                        {% for sr in serial_numbers %}
                        
                            <tr id="serial_row_{{ sr.id }}">
                                <td>{{ forloop.counter }}</td>
                                <td>{{ sr.item }}</td>
                                <td>{{ sr.product_variant }}</td>
                                <td>{{ sr.serial_number }}</td>
                                <td>{{sr.status|capfirst}}</td>
                                <td><a href="{% url 'stock:update_serial_number' sr.id %}"><i class="fa-solid fa-pen" style="color:blue; cursor:pointer;"></i></a>
                            </tr>       
                                
                        {% endfor %}
    
                    </tbody>
                    <tfoot>
                        Total Records: {{serial_numbers.count}}
                    </tfoot>
                </table>
            </div>
            
        </div>
    </div>


{% endblock table %}