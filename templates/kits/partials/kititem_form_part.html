{% load widget_tweaks %}
{{ formset.management_form }}

<input type="hidden" name="form_count" value='{{form_count}}'>
{% for form in formset %}
    <div class="d-flex gap-2 kititem_part justify-content-between">
        <div class="form-group mt-2">
            {% if forloop.first %}<label class='form-label' for="id_form_field">{{form.kit.label_tag}}</label>{% endif %}
            <select name="{{ form.kit.name }}" class='form-select'>
                {% for val,text in form.kit.field.choices %}
                    <option value="{{val}}">{{text}}</option>
                {% endfor %}
            </select>
        </div>
            
        <div class="form-group mt-2">
            {% if forloop.first %} <label class="form-label" for="id_form_field">{{form.variant.label_tag}}</label><br>{% endif %}
            <select name="{{ form.variant.name }}" class="variant-select">
                {% for val,text in form.variant.field.choices %}
                <option value="{{val}}">{{text}}</option>
                {% endfor %}
            </select>
        </div>

        <div class="form-group">
            {% if forloop.first %}<label class="form-label" for="id_form_field">{{form.quantity.label_tag}}</label>{% endif %}
            {{form.quantity |add_class:"form-control"}}
        </div>
    </div>
{% endfor %}

<button class="btn btn-primary mt-2">Submit</button>
